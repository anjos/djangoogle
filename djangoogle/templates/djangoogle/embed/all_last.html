{% load i18n %}
{% comment %}requires "albums" (last N albums) and "videos" (last N videos){% endcomment %}
{% with 80 as thumbheight %}<!-- hardcoded widthxheight for thumbs -->
<span class="djangoogle">
  <span class="bubble">
    <span class="list">
      <table class="horizontal">
        <tr class="bubble_title">
          {% if albums %}<td colspan="{{ albums|length }}">{% trans "Latest albums" %}</td>{% endif %}
          {% if videos %}<td colspan="{{ videos|length }}">{% trans "Latest videos" %}</td>{% endif %}
        </tr>
        <tr>
          {% if albums %}
          <td class="bubble_contents" colspan="{{ albums|length }}">
          {% for obj in albums %}
            <table class="preview">
              <tr>
                <td class="thumbnail">
                  <a href="{% url picasaweb-view-album obj.parent.id obj.id %}" title="{% trans 'Click here to launch a slideshow of this album' %}"><img width="{% widthratio thumbheight obj.thumbnail.height obj.thumbnail.width %}" height="{{ thumbheight }}" src="{{ obj.thumbnail.url }}"/></a>
                </td>
                <td>
                  <div class="object_title"><a href="{{ obj.web_url }}"><img class="picasaweb-logo" src="{{ MEDIA_URL }}djangoogle/img/picasaweb.gif" title="{% trans 'Click here to view this album directly inside PicasaWeb' %}" alt="{% trans 'PicasaWeb' %}" width="13" height="13"/></a> {{ obj.title|truncatewords:"5" }}</div>
                  <div class="comment">{% blocktrans count obj.numphotos as counter %}{{ counter }} photo by{% plural %}{{ counter }} photos by{% endblocktrans %} <a href="{% url picasaweb-user-view obj.parent.id %}">{{ obj.nickname|lower }}</a>, {% trans "updated" %} {{ obj.updated|date:"D, j/M/Y" }}</div>
                </td>
              </tr>
            </table><!-- ends class="preview" -->
          {% endfor %}
          </td><!-- ends class="bubble_contents" -->
          {% endif %}
          {% if videos %}
          <td class="bubble_contents" colspan="{{ videos|length }}">
          {% for obj in videos %}
            <table class="preview">
              <tr>
                <td class="thumbnail">
                  <a href="{% url youtube-view-video obj.parent.id obj.id %}"><img width="{% widthratio thumbheight obj.thumbnail.height obj.thumbnail.width %}" height="{{ thumbheight }}" src="{{ obj.thumbnail.url }}"/></a>
                </td>
                <td>
                  <div class="object_title">{{ obj.title|truncatewords:"5" }}</div>
                  <div class="comment">
                    {{ obj.duration }} {% trans "seconds" %}, {% trans "at" %} <a href="{% url youtube-list-view obj.parent.id %}" title="{% trans 'Click here to only view videos from this playlist' %}">{{ obj.parent.name }}</a>, {% trans "updated" %} {{ obj.published|date:"D, j/M/Y" }}
                    {% if obj.description %}<br/>{{ obj.description|truncatewords:"8" }} {% endif %}
                  </div>
                </td>
              </tr>
            </table><!-- ends class="preview" -->
          {% endfor %}
          </td><!-- ends class="bubble_contents" -->
          {% endif %}
        </tr>
      </table><!-- ends class="horizontal" -->
    </span><!-- ends class="list" -->
  </span><!-- ends class="bubble" -->
</span><!-- ends class="djangoogle" -->
{% endwith %}
